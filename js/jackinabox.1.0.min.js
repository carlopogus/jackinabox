/*
 * jQuery Image Gallery Plugin 2.5
 * https://github.com/.....
 *
 * Copyright 2013, Carl Bradshaw
 * https://bradshaw-design.co.nz
 *
 * Please credit me :)
 */

(function(e){e.fn.jackinabox=function(){return this.each(function(){var t=0,n=e(this).find(".jackbox"),r="",i="",s=n.length,o,u,a,f;e("body").prepend('<div class="background"></div>','<div class="images"><div class="loading"></div><p class="caption"></p><img src="images/image_1.jpg" alt="yolo" /></div>');e(".images").append('<div class="prev-btn"></div>','<div class="next-btn"></div>');var r=e(".images img"),i=e(".images");e(".background, .images").hide();n.click(function(s){var l=n.index(this),c="",h=e(window).height(),p=e(window).height()-200,d=e(window).width()-200;t=l;s.preventDefault();e("body").css("overflow","hidden");r.attr("src",n.eq(l).attr("href")).css({"max-height":p,"max-width":d});e(".caption").text(n.eq(l).attr("title"));i.css({marginTop:h,left:0,right:0});e(".background").fadeIn();i.fadeIn(function(){o=r.width();u=r.height();c=(e(window).height()-u)/2;a=(u-e(".next-btn").height())/2;f=e(".caption").height();e(".next-btn, .prev-btn").css({top:a});e(".caption").css({top:u-f});i.css({width:o,height:u}).animate({marginTop:c-10},function(){e(this).animate({marginTop:c});e(".next-btn").delay(100).animate({right:-100},"slow");e(".prev-btn").delay(100).animate({left:-100},"slow");e(".caption").delay(100).animate({top:u+20})})})});e(".next-btn").hover(function(){e(this).animate({right:"-=5"},100)},function(){e(this).animate({right:"+=5"},100)});e(".prev-btn").hover(function(){e(this).animate({left:"-=5"},100)},function(){e(this).animate({left:"+=5"},100)});var l=function(){var f=t+1;if(f>s-1){t=0}else{t=f}e(".next-btn").animate({right:0,opacity:0},100);e(".prev-btn").animate({left:0,opacity:0},100);e(".caption").animate({top:u,opacity:0},100);r.animate({opacity:0},100,function(){e(this).attr("src",n.eq(t).attr("href")).one("load",function(){o=r.width();u=r.height();imagepos=(e(window).height()-u)/2;a=(u-e(".next-btn").height())/2;e(".caption").text(n.eq(t).attr("title"));i.stop(true,true).animate({width:o,height:u,marginTop:imagepos},function(){r.animate({opacity:1},{duration:100,queue:false});e(".next-btn").animate({right:-100,opacity:1},{duration:100});e(".prev-btn").animate({left:-100,opacity:1},{duration:100});e(".caption").animate({top:u+20,opacity:1},{queue:false})});e(".caption").css({top:u});e(".next-btn, .prev-btn").css({top:a})})});console.log(f)};e(".next-btn").click(function(){l()});e(document).keydown(function(e){if(e.keyCode==39){l()}});var c=function(){var f=t-1;if(f<0){t=s-1}else{t=f}e(".next-btn").animate({right:0,opacity:0},100);e(".prev-btn").animate({left:0,opacity:0},100);e(".caption").animate({top:u,opacity:0},100);r.animate({opacity:0},100,function(){e(this).attr("src",n.eq(t).attr("href")).one("load",function(){o=r.width();u=r.height();imagepos=(e(window).height()-u)/2;a=(u-e(".next-btn").height())/2;e(".caption").text(n.eq(t).attr("title"));i.stop(true,true).animate({width:o,height:u,marginTop:imagepos},function(){r.animate({opacity:1},{duration:100,queue:false});e(".next-btn").animate({right:-100,opacity:1},{duration:100});e(".prev-btn").animate({left:-100,opacity:1},{duration:100});e(".caption").animate({top:u+20,opacity:1},{queue:false})});e(".caption").css({top:u});e(".next-btn, .prev-btn").css({top:a})})})};e(".prev-btn").click(function(){c()});e(document).keydown(function(e){if(e.keyCode==37){c()}});var h=function(){e("body").css("overflow","auto");e(".background, .images").fadeOut();e(".next-btn").animate({right:0},"slow");e(".prev-btn").animate({left:0},"slow")};e(".background").click(function(){h()});e(document).keydown(function(e){if(e.keyCode==27){h()}})})}})(jQuery)